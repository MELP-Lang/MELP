# YZ_26 - DokÃ¼mantasyon DÃ¼zeltmeleri ve While Loop AraÅŸtÄ±rmasÄ±

**Tarih:** 10 AralÄ±k 2025  
**Branch:** `doc-fixes_YZ_26`  
**SÃ¼re:** ~1.5 saat

---

## âœ… Tamamlanan GÃ¶revler

### 1. `text` â†’ `string` DÃ¼zeltmesi
MELP'te `text` keyword'Ã¼ yok, `string` var. TÃ¼m belgelerde dÃ¼zeltildi:

**DÃ¼zeltilen Dosyalar:**
- `NEXT_AI_START_HERE.md`
- `TODO.md`
- `ARCHITECTURE.md`
- `README.md`
- `YZ/YZ_HISTORY.md`
- `compiler/stage0/modules/lexer/lexer.c` - Yorumlar dÃ¼zeltildi
- `compiler/stage0/modules/functions/functions.h`
- `compiler/stage0/modules/functions/functions.c`
- `compiler/stage0/modules/functions/functions_codegen.c`
- `compiler/stage0/modules/codegen_context/tto_types.h`
- `compiler/stage0/modules/codegen_context/codegen_context.h`
- `compiler/stage0/modules/variable/variable.h`

**Lexer DeÄŸiÅŸikliÄŸi:**
```c
// ESKÄ° (yanlÄ±ÅŸ):
else if (strcmp(value, "string") == 0) type = TOKEN_STRING_TYPE;  // STRING type keyword (legacy)
else if (strcmp(value, "text") == 0) type = TOKEN_STRING_TYPE;    // TEXT type keyword (MLP standard)

// YENÄ° (doÄŸru):
else if (strcmp(value, "string") == 0) type = TOKEN_STRING_TYPE;  // STRING type keyword (MLP standard)
else if (strcmp(value, "text") == 0) type = TOKEN_STRING_TYPE;    // TEXT type keyword (legacy alias, deprecated)
```

### 2. Yedekleme PolitikasÄ± GÃ¼ncellemesi
**Eski:** "DeÄŸiÅŸiklik Ã¶ncesi yedek alÄ±n veya git kullanÄ±n"  
**Yeni:** "Her YZ kendi dalÄ±na commit ve push eder (dal adÄ±: `*_YZ_XX` formatÄ±nda, yedekler GitHub'da tutulur)"

---

## ğŸ”´ Devam Eden Sorun: While Loop Ã‡alÄ±ÅŸmÄ±yor

### Problem
While loop syntax'Ä± lexer tarafÄ±ndan doÄŸru tanÄ±nÄ±yor ama parser tarafÄ±ndan iÅŸlenmiyor.

### Test DosyasÄ±
```mlp
function main() returns numeric
    while 1 < 2 do
    end while
    return 0
end function
```

### Hata
```
[Parser] error at line 2: Expected 'function' keyword
```

### Analiz
1. Lexer `while` token'Ä±nÄ± doÄŸru Ã¼retiyor (TYPE=31, TOKEN_WHILE)
2. `statement_parse()` TOKEN_WHILE gÃ¶rÃ¼yor
3. AMA while case'ine girmiyor ve NULL dÃ¶nÃ¼yor
4. Ana dÃ¶ngÃ¼ NULL gÃ¶rÃ¼nce `parse_function_declaration` Ã§aÄŸÄ±rÄ±yor
5. `parse_function_declaration` "function" bekliyor, "while" gÃ¶rÃ¼yor â†’ HATA

### Muhtemel Sebep
`statement_parser.c` satÄ±r 86'daki while case'i Ã§alÄ±ÅŸmÄ±yor. Kontrol akÄ±ÅŸÄ± oraya ulaÅŸmadan Ã¶nce bir yerde return ediliyor olabilir.

### Sonraki YZ Ä°Ã§in Yol HaritasÄ±
1. `statement_parser.c`'de satÄ±r 40-86 arasÄ±nÄ± incele
2. `tok->type == TOKEN_WHILE` kontrolÃ¼nden Ã¶nce hangi kontrollerin olduÄŸunu gÃ¶r
3. `end` token kontrolÃ¼ (satÄ±r 41-70) muhtemelen soruna neden oluyor
4. TOKEN_WHILE deÄŸerinin doÄŸru olduÄŸunu teyit et (lexer.h'de enum sÄ±rasÄ±)

---

## ğŸ“ Eklenen Test DosyalarÄ±
- `test_only_while.mlp` - Basit while test
- `test_while2.mlp` - While ile deÄŸiÅŸken
- `test_single.mlp` - While'sÄ±z basit fonksiyon (Ã‡ALIÅIYOR)
- `test_var_only.mlp` - Sadece deÄŸiÅŸkenler (Ã‡ALIÅIYOR)

---

## ğŸ“Š Durum Ã–zeti

| Ã–zellik | Durum |
|---------|-------|
| Basit fonksiyon | âœ… Ã‡alÄ±ÅŸÄ±yor |
| DeÄŸiÅŸken bildirimi | âœ… Ã‡alÄ±ÅŸÄ±yor |
| For loop | âœ… Ã‡alÄ±ÅŸÄ±yor |
| While loop | âŒ Parser sorunu |
| If/else | âœ… Ã‡alÄ±ÅŸÄ±yor |

---

## ğŸ”œ Sonraki YZ (YZ_27) Ä°Ã§in GÃ¶rev

**Ã–ncelik 1:** While loop parser sorununu dÃ¼zelt
- `statement_parser.c` satÄ±r 40-86 arasÄ± debug et
- TOKEN_WHILE case'ine neden girilmediÄŸini bul

**Ã–ncelik 2:** Phase 4 devam (while dÃ¼zeldikten sonra)
- Break/Continue ekle
- For-each loop ekle

---

**Commit:** `aaedc8f` - YZ_26: Revert debug code, prepare for handoff
