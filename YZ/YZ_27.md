# YZ_27 Oturum Raporu

**Tarih:** 10 AralÄ±k 2025  
**Dal:** `doc-fixes_YZ_26` (devam)  
**Durum:** âœ… TamamlandÄ±

---

## ğŸ¯ Hedefler

1. âœ… While loop bug'Ä±nÄ± dÃ¼zelt (ACÄ°L)
2. âœ… TasarÄ±m felsefesini belgele
3. âœ… `do` keyword'Ã¼ kaldÄ±r

---

## ğŸ› While Loop Bug DÃ¼zeltmesi

### Sorun
`while x < 3 do ... end while` Ã§alÄ±ÅŸmÄ±yordu. Hata: "Expected 'function' keyword"

### KÃ¶k Neden
**Lexer** `<` karakteri iÃ§in yanlÄ±ÅŸ token dÃ¶ndÃ¼rÃ¼yordu:
- Beklenen: `TOKEN_LESS` (karÅŸÄ±laÅŸtÄ±rma operatÃ¶rÃ¼)
- DÃ¶nen: `TOKEN_LANGLE` (tuple literal iÃ§in)

### Analiz
`lexer.c` satÄ±r 254-270'te tuple vs comparison ayrÄ±mÄ± iÃ§in heuristic vardÄ±:
```c
// YANLIÅ: < sonrasÄ± identifier/number varsa tuple kabul et
if (isalpha(next) || isdigit(next) || ...) {
    return TOKEN_LANGLE;  // âŒ while x < 3 iÃ§in yanlÄ±ÅŸ!
}
```

`while x < 3` yazÄ±ldÄ±ÄŸÄ±nda `<` sonrasÄ± `3` (rakam) olduÄŸu iÃ§in `TOKEN_LANGLE` dÃ¶ndÃ¼rÃ¼lÃ¼yordu.

### Ã‡Ã¶zÃ¼m
BoÅŸluk bazlÄ± heuristic:
```c
// DOÄRU: BoÅŸluk varsa karÅŸÄ±laÅŸtÄ±rma
if (next == ' ' || next == '\t') {
    return TOKEN_LESS;  // x < 3
}
if (had_whitespace) {
    return TOKEN_LESS;  // x < 3
}
return TOKEN_LANGLE;  // <3,4> tuple
```

### Dosya DeÄŸiÅŸiklikleri
- `compiler/stage0/modules/lexer/lexer.c` - `<` token heuristic dÃ¼zeltildi

---

## ğŸ—‘ï¸ `do` Keyword KaldÄ±rÄ±ldÄ±

### Ã–nceki Syntax
```mlp
while x < 3 do
    x = x + 1
end while
```

### Yeni Syntax
```mlp
while x < 3
    x = x + 1
end while
```

### Dosya DeÄŸiÅŸiklikleri
- `compiler/stage0/modules/control_flow/control_flow_parser.c` - `do` kontrolÃ¼ kaldÄ±rÄ±ldÄ±

---

## ğŸ“š TasarÄ±m Felsefesi Belgelendi

### MELP Felsefesi
**VB.NET OkunabilirliÄŸi + Python SadeliÄŸi**

| Karar | MELP SeÃ§imi | Neden |
|-------|-------------|-------|
| `=` vs `==` | `=` atama, `==` karÅŸÄ±laÅŸtÄ±rma | AÃ§Ä±k, hata Ã¶nler |
| Function keyword | Tek `function`, `Sub` yok | Sadelik |
| DeÄŸiÅŸken bildirimi | `numeric x = 5` | `Dim` gereksiz |
| String tipi | `string` keyword | Evrensel |

### Stateless Architecture
- **Compiler Stateless**: Parser fonksiyonlarÄ± stateless, modÃ¼ller arasÄ± global state yok
- **Runtime Stateful**: `state` keyword ile runtime state yÃ¶netimi mÃ¼mkÃ¼n

### Dosya DeÄŸiÅŸiklikleri
- `ARCHITECTURE.md` - Rule #0.5 (Stateless) + Rule #0.6 (Design Philosophy)
- `docs/language/melp_syntax.md` - Design Philosophy bÃ¶lÃ¼mÃ¼
- `docs_tr/language/melp_syntax.md` - TasarÄ±m Felsefesi bÃ¶lÃ¼mÃ¼

---

## ğŸ§¹ Debug KodlarÄ± Temizlendi

AÅŸaÄŸÄ±daki dosyalardan `fprintf(stderr, "[DEBUG...]")` satÄ±rlarÄ± kaldÄ±rÄ±ldÄ±:
- `statement_parser.c`
- `control_flow_parser.c`
- `comparison_parser.c`

---

## âœ… Test SonuÃ§larÄ±

```bash
# While loop testi
$ cat test_while_simple.mlp
function main() returns numeric
    numeric x = 0
    while x < 3
        x = x + 1
    end while
    return x
end function

$ ./functions_compiler test_while_simple.mlp test_while_simple.s
âœ… Compiled test_while_simple.mlp -> test_while_simple.s

$ ./test_while_simple
Exit code: 3  # âœ… DoÄŸru! (0â†’1â†’2â†’3)
```

---

## ğŸ“‹ Sonraki AdÄ±mlar (Phase 4)

1. **For-Each Loop** - `for each item in collection`
2. **Break/Continue** - DÃ¶ngÃ¼ kontrolÃ¼
3. **String Methods** - toUpperCase(), trim(), vb.

---

## ğŸ“ DeÄŸiÅŸtirilen Dosyalar

| Dosya | DeÄŸiÅŸiklik |
|-------|------------|
| `compiler/stage0/modules/lexer/lexer.c` | `<` token heuristic dÃ¼zeltildi |
| `compiler/stage0/modules/control_flow/control_flow_parser.c` | `do` keyword kaldÄ±rÄ±ldÄ±, debug temizlendi |
| `compiler/stage0/modules/comparison/comparison_parser.c` | Debug kodlarÄ± temizlendi |
| `compiler/stage0/modules/statement/statement_parser.c` | Debug kodlarÄ± temizlendi |
| `ARCHITECTURE.md` | Stateless + Design Philosophy eklendi |
| `docs/language/melp_syntax.md` | Design Philosophy bÃ¶lÃ¼mÃ¼ |
| `docs_tr/language/melp_syntax.md` | TasarÄ±m Felsefesi bÃ¶lÃ¼mÃ¼ |
| `TODO.md` | While loop tamamlandÄ± iÅŸaretlendi |
| `NEXT_AI_START_HERE.md` | YZ_27 gÃ¼ncellemesi |

---

**Toplam SÃ¼re:** ~2 saat  
**Sonraki YZ:** YZ_28
