# YZ_01 - Stage 1 Parser: Expression Parsing

**Tarih:** 16 AralÄ±k 2025  
**GÃ¶rev:** Phase 1 Part 2 - Expression Parsing  
**SÃ¼re Tahmini:** 4-6 saat  
**Ã–nceki:** Stage 0 Complete (stage_0_YZ/YZ_97)  
**Durum:** â³ BAÅLANMADI

---

## ğŸ¯ Bu Session'da YapÄ±lacaklar

### Ana GÃ¶rev: Expression Parser OluÅŸtur

MELP dilinde bir expression parser yazacaÄŸÄ±z. Bu parser:
- Primary expressions (literals, identifiers) parse edecek
- Binary operations (+, -, *, /, %) iÅŸleyecek
- Comparison operations (==, !=, <, >, <=, >=) destekleyecek
- Logical operations (and, or, not) handle edecek
- Operator precedence doÄŸru ÅŸekilde uygulayacak

---

## ğŸ“‹ Checklist

### 1. Expression Parser ModÃ¼lÃ¼
- [ ] `modules/parser_mlp/parser_expr.mlp` dosyasÄ±nÄ± oluÅŸtur
- [ ] Expression type enum'larÄ± tanÄ±mla
- [ ] Primary expression parsing fonksiyonlarÄ±
- [ ] Binary expression parsing fonksiyonlarÄ±
- [ ] Unary expression parsing fonksiyonlarÄ±
- [ ] Operator precedence tablosu

### 2. Ä°mplementasyon DetaylarÄ±

#### 2.1 Primary Expressions
```mlp
function parse_primary_expr(list tokens, numeric pos) returns list
    -- DÃ¶ndÃ¼r: [expr_node, new_pos]
    -- Handle:
    --   - Numeric literals (42, 3.14)
    --   - String literals ("hello")
    --   - Boolean literals (true, false)
    --   - Identifiers (x, myVar)
    --   - Parenthesized expressions ( (expr) )
end_function
```

#### 2.2 Binary Expressions
```mlp
function parse_binary_expr(list tokens, numeric pos, numeric min_prec) returns list
    -- Pratt parsing veya precedence climbing
    -- Operator precedence:
    --   1. *, /, %        (highest)
    --   2. +, -
    --   3. <, >, <=, >=
    --   4. ==, !=
    --   5. and
    --   6. or             (lowest)
end_function
```

#### 2.3 Unary Expressions
```mlp
function parse_unary_expr(list tokens, numeric pos) returns list
    -- Handle: not, -
    -- Ã–rnek: not x, -42
end_function
```

#### 2.4 Main Expression Parser
```mlp
function parse_expr(list tokens, numeric pos) returns list
    -- Ana entry point
    -- TÃ¼m expression tÃ¼rlerini handle et
    -- DÃ¶ndÃ¼r: [expr_ast_node, new_position]
end_function
```

### 3. Test Cases
- [ ] `tests/manual/test_expr_literals.mlp` - Literal parsing
- [ ] `tests/manual/test_expr_binary.mlp` - Binary operations
- [ ] `tests/manual/test_expr_precedence.mlp` - Operator precedence
- [ ] `tests/manual/test_expr_complex.mlp` - Complex expressions

### 4. Integration
- [ ] Parser infrastructure ile entegrasyon
- [ ] Token stream ile baÄŸlantÄ±
- [ ] Error handling entegrasyonu

---

## ğŸ”§ Stage 0 Uyumluluk NotlarÄ±

**DÄ°KKAT:** Stage 0 compiler ile derleyeceÄŸiz, bu yÃ¼zden:

### âœ… KullanabileceÄŸimiz:
- List indexing: `tokens[pos]`
- Function parameters: `parse_expr(tokens, pos)`
- Direct return values: `return [node, new_pos]`
- Simple if/else statements

### âŒ KULLANMA:
- Global variables (parser state'i parametre olarak geÃ§)
- Complex expression chains (basit tut)
- `println()` + string concatenation (garbled output olabilir)

### ğŸ’¡ Workarounds:
```mlp
-- YANLIÅ: Global state
list parser_tokens
numeric parser_pos

-- DOÄRU: Parameter passing
function parse_expr(list tokens, numeric pos) returns list
    -- tokens ve pos parametrelerle geliyor
    return [result, new_pos]
end_function
```

---

## ğŸ“š Referanslar

### Gerekli ModÃ¼ller
1. `modules/parser_mlp/ast_nodes.mlp` - AST node definitions (âœ… Mevcut)
2. `modules/parser_mlp/token_stream_v2.mlp` - Token stream helper (âœ… Mevcut)
3. `modules/parser_mlp/parser_errors_v2.mlp` - Error reporting (âœ… Mevcut)

### Compiler
- Stage 0 compiler: `compiler/stage0/modules/functions/functions_standalone`
- Runtime: `runtime/stdlib/libmlp_stdlib.a` ve `runtime/sto/libsto_runtime.a`
- Compile command: 
  ```bash
  ./compiler/stage0/modules/functions/functions_standalone \
      modules/parser_mlp/parser_expr.mlp
  gcc parser_expr.s \
      runtime/stdlib/libmlp_stdlib.a \
      runtime/sto/libsto_runtime.a \
      -o parser_expr
  ```

---

## ğŸ¯ BaÅŸarÄ± Kriterleri

Session baÅŸarÄ±lÄ± sayÄ±lÄ±r eÄŸer:

1. âœ… `parser_expr.mlp` Stage 0 ile compile oluyor
2. âœ… TÃ¼m test case'ler geÃ§iyor
3. âœ… Operator precedence doÄŸru uygulanÄ±yor
4. âœ… Error handling Ã§alÄ±ÅŸÄ±yor
5. âœ… Code temiz ve dokÃ¼mante

---

## ğŸ“ Session Sonu Raporu

*[Session bitiminde doldurulacak]*

### Tamamlanan Ä°ÅŸler
- [ ] ...

### Sorunlar ve Ã‡Ã¶zÃ¼mler
- [ ] ...

### Sonraki Session iÃ§in Notlar
- [ ] ...

---

## ğŸš€ BaÅŸla!

**Komut:**
```bash
# Session'a baÅŸlamak iÃ§in:
cd /home/pardus/projeler/MLP/MLP
# YZ_01 dosyasÄ±nÄ± oku ve gÃ¶revi baÅŸlat
```

**Sonraki YZ:** YZ_02 - Statement Parsing
