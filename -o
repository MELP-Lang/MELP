; MELP Program - Generated LLVM IR
; Compiler: MELP Stage 0 with LLVM Backend
; Date: 13 AralÄ±k 2025

; Type definitions
%sto_value = type { i8, i64 }

; MLP Standard Library - I/O Functions
; void mlp_println_numeric(void* value, uint8_t sto_type)
declare void @mlp_println_numeric(i8*, i8)
; void mlp_println_string(const char* str)
declare void @mlp_println_string(i8*)

; C Standard Library - Memory Allocation
; void* malloc(size_t size)
declare i8* @malloc(i64)

; MLP Standard Library - String Functions (Task 0.2 + 0.3)
; char* mlp_string_concat(const char* str1, const char* str2)
declare i8* @mlp_string_concat(i8*, i8*)
; char* mlp_string_char_at(const char* str, size_t index)
declare i8* @mlp_string_char_at(i8*, i64)

; MLP Standard Library - List Functions (YZ_200)
; MelpList* melp_list_create(size_t element_size)
declare i8* @melp_list_create(i64)
; int melp_list_append(MelpList* list, void* element)
declare i32 @melp_list_append(i8*, i8*)
; int melp_list_prepend(MelpList* list, void* element)
declare i32 @melp_list_prepend(i8*, i8*)
; size_t melp_list_length(MelpList* list)
declare i64 @melp_list_length(i8*)
; void* melp_list_get(MelpList* list, size_t index)
declare i8* @melp_list_get(i8*, i64)
; int melp_list_set(MelpList* list, size_t index, void* element)
declare i32 @melp_list_set(i8*, i64, i8*)

; MLP Standard Library - Map Functions (YZ_201)
; MelpMap* melp_map_create(size_t value_size)
declare i8* @melp_map_create(i64)
; int melp_map_insert(MelpMap* map, const char* key, const void* value)
declare i32 @melp_map_insert(i8*, i8*, i8*)
; void* melp_map_get(MelpMap* map, const char* key)
declare i8* @melp_map_get(i8*, i8*)
; int melp_map_remove(MelpMap* map, const char* key)
declare i32 @melp_map_remove(i8*, i8*)
; int melp_map_has_key(MelpMap* map, const char* key)
declare i32 @melp_map_has_key(i8*, i8*)
; size_t melp_map_length(MelpMap* map)
declare i64 @melp_map_length(i8*)


; Function: get_name
define i8* @get_name() {
entry:
    %tmp1 = getelementptr inbounds [5 x i8], [5 x i8]* @.str.1, i64 0, i64 0
    ret i8* %tmp1
}

; Function: main
define i64 @main() {
entry:
  %name_ptr = alloca i8*, align 8
    %tmp2 = call i8* @get_name()
  store i8* %tmp2, i8** %name_ptr, align 8
    %tmp3 = load i8*, i8** %name_ptr, align 8
    call void @mlp_println_string(i8* %tmp3)
    ret i64 0
}

; String Constants
@.str.1 = private unnamed_addr constant [5 x i8] c"MELP\00", align 1

